# 快递柜小程序开发文档

## 项目概述

这是一个基于微信小程序的快递柜用户端应用，为用户提供便捷的快递存取服务。

## 技术栈

- 微信小程序原生开发
- 后端API接口（Spring Boot）
- JWT认证

## 项目结构

```
user_xcx/
├── pages/                  # 页面目录
│   ├── login/             # 登录页面
│   ├── register/          # 注册页面
│   ├── cabinets/          # 快递柜列表
│   ├── cabinet-detail/    # 快递柜详情
│   ├── store/             # 存件页面
│   ├── pick-up/           # 取件页面
│   ├── orders/            # 我的订单
│   └── profile/           # 个人中心
├── components/            # 组件目录
│   └── navigation-bar/    # 导航栏组件
├── utils/                 # 工具类
│   ├── api.js            # API请求封装
│   └── service.js        # 业务接口封装
├── images/                # 图片资源
├── app.js                 # 小程序入口
├── app.json              # 小程序配置
└── app.wxss              # 全局样式
```

## 功能模块

### 1. 用户认证
- 用户注册：用户名、手机号、密码
- 用户登录：用户名/手机号 + 密码
- Token管理：自动存储和刷新

### 2. 快递柜管理
- 快递柜列表：查看所有可用的快递柜
- 快递柜详情：查看快递柜信息和格口状态
- 格口查询：查看空闲和已占用的格口

### 3. 存件功能
- 选择快递柜和格口
- 填写快递信息（收件人、手机号、快递公司、快递单号）
- 生成取件码

### 4. 取件功能
- 输入取件码
- 查询快递信息
- 自动开仓取件

### 5. 订单管理
- 查看我的订单
- 订单状态跟踪
- 取件码查看

### 6. 个人中心
- 用户信息展示
- 登录/注册入口
- 快捷功能入口
- 退出登录

## API接口说明

### 基础配置
- Base URL: `http://localhost:8080/api`
- 认证方式: JWT Bearer Token

### 接口列表

#### 认证接口
- `POST /auth/register` - 用户注册
- `POST /auth/login` - 用户登录

#### 快递柜接口
- `GET /cabinets` - 获取所有快递柜
- `GET /cabinets/{id}` - 根据ID获取快递柜
- `GET /cabinets/code/{code}` - 根据编号获取快递柜
- `GET /cabinets/{cabinetId}/compartments` - 获取格口列表
- `GET /cabinets/{cabinetId}/compartments/available` - 获取可用格口
- `POST /cabinets/compartments/{compartmentId}/open` - 打开格口

#### 订单接口
- `GET /orders/phone/{phone}` - 根据手机号查询订单
- `GET /orders/user/{userId}` - 根据用户ID查询订单
- `GET /orders/pick-code/{pickCode}` - 根据取件码查询订单
- `POST /orders` - 创建订单（存件）
- `POST /orders/pick-up` - 取件

## 开发说明

### 环境要求
- 微信开发者工具
- Node.js（可选，用于某些工具）
- 后端服务运行在 `http://localhost:8080`

### 配置说明

1. **API地址配置**
   - 在 `utils/api.js` 中修改 `BASE_URL` 为实际的后端地址

2. **图标配置**
   - 需要在 `images/` 目录下放置tabBar图标
   - 图标尺寸：81x81像素，PNG格式
   - 详见 `IMAGES_README.md`

3. **跨域配置**
   - 确保后端已配置允许小程序域名访问
   - 在微信小程序管理后台配置服务器域名

### 使用流程

1. **首次使用**
   - 打开小程序，进入登录/注册页面
   - 注册账号或登录已有账号

2. **存件流程**
   - 进入"快递柜"页面
   - 选择快递柜，查看详情
   - 点击空闲格口，填写快递信息
   - 确认存件，获取取件码

3. **取件流程**
   - 进入"取件"页面
   - 输入6位取件码
   - 确认取件，格口自动打开

4. **查看订单**
   - 进入"订单"页面
   - 查看所有订单记录
   - 查看取件码和订单状态

## 注意事项

1. **网络请求**
   - 确保后端服务正常运行
   - 检查网络连接和域名配置

2. **数据存储**
   - 用户信息存储在本地缓存
   - Token有效期24小时

3. **安全性**
   - 密码使用加密传输
   - Token存储在本地，注意安全

4. **兼容性**
   - 支持微信小程序基础库 3.0.0 及以上版本
   - 使用 Skyline 渲染引擎

## 后续优化建议

1. 添加地图定位功能，显示附近的快递柜
2. 添加扫码功能，快速扫描快递单号
3. 添加消息推送，提醒取件
4. 优化UI设计，提升用户体验
5. 添加帮助文档和常见问题
6. 添加用户反馈功能

## 联系方式

如有问题，请联系开发团队。
