<navigation-bar title="个人中心" back="{{false}}" color="black" background="#f7f7f7"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- 用户信息卡片 -->
    <view class="user-banner" bindtap="{{isLoggedIn ? '' : 'goToLogin'}}">
      <view class="user-avatar-box">
        <text class="avatar-icon" wx:if="{{!userInfo.avatarUrl}}">👤</text>
        <image class="avatar-img" wx:else src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      </view>
      <view class="user-info-box">
        <block wx:if="{{isLoggedIn && userInfo}}">
          <view class="user-name">{{userInfo.username}}</view>
          <view class="user-phone">{{userInfo.phone}}</view>
        </block>
        <block wx:else>
          <view class="user-name">登录/注册</view>
          <view class="user-desc">登录后享受更多服务</view>
        </block>
      </view>
      <view class="user-arrow" wx:if="{{!isLoggedIn}}">›</view>
    </view>

    <!-- 功能菜单 - 宫格布局 -->
    <view class="service-card">
      <view class="card-title">我的服务</view>
      <view class="grid-container">
        <view class="grid-item" bindtap="goToOrders">
          <view class="icon-box color-blue">📋</view>
          <text class="grid-text">我的订单</text>
        </view>

        <view class="grid-item" bindtap="goToAddress">
          <view class="icon-box color-orange">📍</view>
          <text class="grid-text">地址管理</text>
        </view>

        <view class="grid-item" bindtap="handleContact">
          <view class="icon-box color-red">📞</view>
          <text class="grid-text">联系客服</text>
        </view>

        <view class="grid-item" bindtap="goToHelp">
          <view class="icon-box color-green">❓</view>
          <text class="grid-text">帮助中心</text>
        </view>

        <view class="grid-item" bindtap="handleAbout">
          <view class="icon-box color-purple">ℹ️</view>
          <text class="grid-text">关于我们</text>
        </view>

        <view class="grid-item" bindtap="goToSettings">
          <view class="icon-box color-grey">⚙️</view>
          <text class="grid-text">设置</text>
        </view>
      </view>
      
      <!-- 退出登录按钮 (整合在卡片内) -->
      <view class="logout-box" wx:if="{{isLoggedIn}}">
        <view class="divider"></view>
        <button class="btn-logout-text" bindtap="handleLogout">退出登录</button>
      </view>
    </view>
  </view>
</scroll-view>