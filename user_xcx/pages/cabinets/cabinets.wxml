<navigation-bar title="å¿«é€’æŸœåˆ—è¡¨" back="{{false}}" color="black" background="#f7f7f7"></navigation-bar>
<view class="page-container">
  <!-- é¡¶éƒ¨å®šä½åŒºåŸŸ -->
  <view class="header-section">
    <view class="location-card" bindtap="getCurrentLocation">
      <view class="location-info">
        <text class="location-icon">ğŸ“</text>
        <text class="location-text">{{currentLocation ? 'å·²è·å–å½“å‰ä½ç½®' : 'ç‚¹å‡»è·å–é™„è¿‘å¿«é€’æŸœ'}}</text>
      </view>
      <text class="location-arrow">â€º</text>
    </view>
  </view>

  <scroll-view class="scrollarea" scroll-y type="list" refresher-enabled="{{true}}" bindrefresherrefresh="onPullDownRefresh" refresher-triggered="{{loading}}">
    <view class="main-content">
      <view class="section-header">
        <view class="section-title">é™„è¿‘å¿«é€’æŸœ</view>
        <view class="location-status" wx:if="{{showLocationTip}}">å·²æŒ‰è·ç¦»æ’åº</view>
      </view>

      <view class="cabinet-list">
        <view 
          class="cabinet-item" 
          wx:for="{{cabinets}}" 
          wx:key="id"
          data-id="{{item.id}}"
          bindtap="onCabinetTap"
        >
          <view class="cabinet-main">
            <view class="cabinet-header">
              <text class="cabinet-name">{{item.name}}</text>
              <text class="status-badge status-{{item.status}}">{{item.status === 1 ? 'æ­£å¸¸' : 'ç»´æŠ¤ä¸­'}}</text>
            </view>
            <view class="cabinet-address">
              <text class="address-icon">ğŸ“</text>
              <text>{{item.address}}</text>
            </view>
            <view class="cabinet-meta">
              <text class="meta-item">ç¼–å·ï¼š{{item.code}}</text>
            </view>
          </view>
          
          <view class="cabinet-side">
            <view class="available-box">
              <text class="count">{{item.availableCompartments || 0}}</text>
              <text class="label">å¯ç”¨æ ¼å£</text>
            </view>
          </view>
        </view>

        <view wx:if="{{cabinets.length === 0 && !loading}}" class="empty">
          <image class="empty-img" src="/assets/empty.png" mode="aspectFit" wx:if="{{false}}"></image>
          <text class="empty-text">æš‚æ— é™„è¿‘çš„å¿«é€’æŸœ</text>
          <button class="btn-retry" bindtap="loadCabinets" size="mini">åˆ·æ–°åˆ—è¡¨</button>
        </view>
      </view>
    </view>
  </scroll-view>
</view>