<navigation-bar title="å¿«é€’æŸœåˆ—è¡¨" back="{{false}}" color="black" background="#f7f7f7"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list" refresher-enabled="{{true}}" bindrefresherrefresh="onPullDownRefresh" refresher-triggered="{{loading}}">
  <view class="container">
    <!-- å®šä½æç¤º -->
    <view class="location-tip" wx:if="{{showLocationTip}}">
      <text class="tip-text">å·²æ˜¾ç¤ºé™„è¿‘å¿«é€’æŸœ</text>
    </view>

    <!-- è·å–é™„è¿‘å¿«é€’æŸœæŒ‰é’® -->
    <view class="location-button-container">
      <button class="location-button" bindtap="getCurrentLocation">
        <text class="location-icon">ğŸ“</text>
        <text>è·å–é™„è¿‘å¿«é€’æŸœ</text>
      </button>
    </view>

    <view class="section-title">é™„è¿‘å¿«é€’æŸœ</view>

    <view class="cabinet-list">
      <view 
        class="cabinet-item" 
        wx:for="{{cabinets}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="onCabinetTap"
      >
        <view class="cabinet-info">
          <view class="cabinet-name">{{item.name}}</view>
          <view class="cabinet-code">ç¼–å·ï¼š{{item.code}}</view>
          <view class="cabinet-address">
            <text class="address-icon">ğŸ“</text>
            <text>{{item.address}}</text>
          </view>
        </view>
        <view class="cabinet-status">
          <view class="status-badge status-{{item.status}}">
            {{item.status === 1 ? 'æ­£å¸¸' : 'ç»´æŠ¤ä¸­'}}
          </view>
          <view class="available-count">
            å¯ç”¨æ ¼å£ï¼š{{item.availableCompartments || 0}}
          </view>
        </view>
      </view>

      <view wx:if="{{cabinets.length === 0 && !loading}}" class="empty">
        <text class="empty-text">æš‚æ— å¿«é€’æŸœ</text>
      </view>
    </view>
  </view>
</scroll-view>
